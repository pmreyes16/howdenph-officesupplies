import{r as i,j as e,V as M,R as Q,c as D,A as W,C as Y,X as $,T as _,D as G,P as Oe,$ as Be,a as Z,b as He,S as Me,d as J,u as Qe,e as We,f as K,I as X,F as ee,g as se,B as Ye,h as _e,U as te,L as Ge,i as ae,k as Ze,l as re,m as le,n as Je,o as ne,p as Ke,q as ie,s as Xe,t as oe,v as de,w as es,x as ce,y as ss,z as me,E as ts,G as as,O as ue,H as rs,J as xe,K as ls,M as pe,N as he,Q as ns,W as ge,Y as is,Z as q,_ as fe,a0 as os,a1 as ds,a2 as O,a3 as H,a4 as je,a5 as cs,a6 as ve,a7 as ms,a8 as us,a9 as xs,aa as ye,ab as be,ac as Ne,ad as ps,ae as hs}from"./vendor-Bz9mgt4P.js";import{c as u,u as gs,a as y,s as fs}from"./index-DM-qLYKU.js";const js=Oe,we=i.forwardRef(({className:s,...t},a)=>e.jsx(M,{ref:a,className:u("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",s),...t}));we.displayName=M.displayName;const vs=D("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Se=i.forwardRef(({className:s,variant:t,...a},l)=>e.jsx(Q,{ref:l,className:u(vs({variant:t}),s),...a}));Se.displayName=Q.displayName;const ys=i.forwardRef(({className:s,...t},a)=>e.jsx(W,{ref:a,className:u("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",s),...t}));ys.displayName=W.displayName;const ke=i.forwardRef(({className:s,...t},a)=>e.jsx(Y,{ref:a,className:u("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",s),"toast-close":"",...t,children:e.jsx($,{className:"h-4 w-4"})}));ke.displayName=Y.displayName;const Ce=i.forwardRef(({className:s,...t},a)=>e.jsx(_,{ref:a,className:u("text-sm font-semibold",s),...t}));Ce.displayName=_.displayName;const Re=i.forwardRef(({className:s,...t},a)=>e.jsx(G,{ref:a,className:u("text-sm opacity-90",s),...t}));Re.displayName=G.displayName;function Js(){const{toasts:s}=gs();return e.jsxs(js,{children:[s.map(function({id:t,title:a,description:l,action:o,...m}){return e.jsxs(Se,{...m,children:[e.jsxs("div",{className:"grid gap-1",children:[a&&e.jsx(Ce,{children:a}),l&&e.jsx(Re,{children:l})]}),o,e.jsx(ke,{})]},t)}),e.jsx(we,{})]})}const qe=i.createContext(null);function Ks({children:s,defaultTheme:t="system",value:a,...l}){const[o,m]=i.useState(()=>{if(typeof window<"u"){const d=localStorage.getItem("theme");return d&&(d==="dark"||d==="light"||d==="system")?d:t}return t});i.useEffect(()=>{const d=window.document.documentElement;if(d.classList.remove("light","dark"),o==="system"){const c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";d.classList.add(c);return}d.classList.add(o)},[o]);const n={theme:o,setTheme:d=>{localStorage.setItem("theme",d),m(d)}};return e.jsx(qe.Provider,{value:n,...l,children:s})}const bs=()=>{const s=i.useContext(qe);if(!s)throw new Error("useTheme must be used within a ThemeProvider");return s},Xs=({...s})=>{const{theme:t}=bs();return e.jsx(Be,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...s})},et=He,Ns=i.forwardRef(({className:s,sideOffset:t=4,...a},l)=>e.jsx(Z,{ref:l,sideOffset:t,className:u("z-50 overflow-hidden rounded-md border border-border/40 bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-lg animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...a}));Ns.displayName=Z.displayName;const ws=D("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),h=i.forwardRef(({className:s,variant:t,size:a,asChild:l=!1,...o},m)=>{const n=l?Me:"button";return e.jsx(n,{className:u(ws({variant:t,size:a,className:s})),ref:m,...o})});h.displayName="Button";const f=i.forwardRef(({className:s,type:t,...a},l)=>e.jsx("input",{type:t,className:u("flex h-10 w-full rounded-md border border-border/60 bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),ref:l,...a}));f.displayName="Input";const Ss=D("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",{variants:{variant:{default:"text-foreground",muted:"text-muted-foreground",accent:"text-primary"},size:{default:"text-sm",xs:"text-xs",sm:"text-sm",lg:"text-base"}},defaultVariants:{variant:"default",size:"default"}}),g=i.forwardRef(({className:s,variant:t,size:a,...l},o)=>e.jsx(J,{ref:o,className:u(Ss({variant:t,size:a}),s),...l}));g.displayName=J.displayName;const b=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:u("rounded-lg border border-border/40 bg-background shadow-sm",s),...t}));b.displayName="Card";const S=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:u("flex flex-col space-y-1.5 p-6",s),...t}));S.displayName="CardHeader";const k=i.forwardRef(({className:s,...t},a)=>e.jsx("h3",{ref:a,className:u("text-2xl font-semibold leading-none tracking-tight text-foreground",s),...t}));k.displayName="CardTitle";const Ie=i.forwardRef(({className:s,...t},a)=>e.jsx("p",{ref:a,className:u("text-sm text-muted-foreground",s),...t}));Ie.displayName="CardDescription";const N=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:u("p-6 pt-0",s),...t}));N.displayName="CardContent";const ks=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:u("flex items-center p-6 pt-0",s),...t}));ks.displayName="CardFooter";const Cs=D("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground shadow-sm",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",success:"border-green-500/50 text-green-600 dark:text-green-400 [&>svg]:text-green-600 dark:[&>svg]:text-green-400 bg-green-50 dark:bg-green-950/20",warning:"border-yellow-500/50 text-yellow-600 dark:text-yellow-400 [&>svg]:text-yellow-600 dark:[&>svg]:text-yellow-400 bg-yellow-50 dark:bg-yellow-950/20",info:"border-primary/50 text-primary dark:text-primary-foreground [&>svg]:text-primary bg-primary/10 dark:bg-primary/20"}},defaultVariants:{variant:"default"}}),Te=i.forwardRef(({className:s,variant:t,...a},l)=>e.jsx("div",{ref:l,role:"alert",className:u(Cs({variant:t}),s),...a}));Te.displayName="Alert";const Rs=i.forwardRef(({className:s,...t},a)=>e.jsx("h5",{ref:a,className:u("mb-1 font-medium leading-none tracking-tight",s),...t}));Rs.displayName="AlertTitle";const Ae=i.forwardRef(({className:s,...t},a)=>e.jsx("div",{ref:a,className:u("text-sm [&_p]:leading-relaxed opacity-90",s),...t}));Ae.displayName="AlertDescription";const qs=()=>{const{login:s}=y(),t=Qe(),[a,l]=i.useState(""),[o,m]=i.useState(""),[n,d]=i.useState(""),[c,r]=i.useState(!1),[p,j]=i.useState(!1),I=async x=>{x.preventDefault(),d(""),r(!0),await new Promise(R=>setTimeout(R,800));try{await s(a,o)?t("/"):d("Invalid credentials.")}catch(R){d(R.message||"Login failed. Please try again.")}r(!1)};return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:e.jsx("div",{className:"w-full max-w-md",children:e.jsxs(b,{className:"shadow-2xl border-0 bg-white/80 backdrop-blur-sm",children:[e.jsxs(S,{className:"text-center pb-8",children:[e.jsx("img",{src:"/Logo.png",alt:"Logo",className:"mx-auto mb-4",style:{width:"196px"}}),e.jsx(k,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Office Supplies"}),e.jsx(Ie,{className:"text-lg text-gray-600",children:"Inventory Management System"})]}),e.jsxs(N,{className:"space-y-6",children:[e.jsxs("form",{onSubmit:I,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"username",className:"text-sm font-medium",children:"Username"}),e.jsx(f,{id:"username",type:"text",value:a,onChange:x=>l(x.target.value),placeholder:"Enter username",required:!0,className:"h-11"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"password",className:"text-sm font-medium",children:"Password"}),e.jsx(f,{id:"password",type:"password",value:o,onChange:x=>m(x.target.value),placeholder:"Enter password",required:!0,className:"h-11"})]}),n&&e.jsxs(Te,{variant:"destructive",children:[e.jsx(We,{className:"h-4 w-4"}),e.jsx(Ae,{children:n})]}),e.jsx(h,{type:"submit",className:"w-full h-11 bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700 text-white font-medium",disabled:c||!p,children:c?"Signing in...":"Sign In"})]}),e.jsxs("div",{className:"mt-4 border border-gray-500 rounded-md p-2 bg-black bg-opacity-50 text-white w-full h-auto text-xs space-y-2",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx("input",{type:"checkbox",id:"acknowledgement",className:"mt-1",checked:p,onChange:x=>j(x.target.checked)}),e.jsx("label",{htmlFor:"acknowledgement",className:"text-xs",children:"I accept and acknowledge the statement below"})]}),e.jsx("p",{className:"font-bold text-teal-400 text-left text-xs",children:"* UNAUTHORIZED ACCESS TO THIS APPLICATION IS PROHIBITED *"}),e.jsxs("p",{className:"text-xs text-justify leading-snug",children:[e.jsx("strong",{children:"WARNING:"})," You must have explicit, authorized permission to access or configure this device. Unauthorized attempts and actions to access or use this system may result in civil and/or criminal penalties. All activities performed on this device are logged and monitored."]})]})]})]})})})},De=i.forwardRef(({className:s,size:t="md",...a},l)=>e.jsx(K,{ref:l,className:u("relative flex shrink-0 overflow-hidden rounded-full border border-border/30 ring-offset-background",t==="sm"&&"h-8 w-8",t==="md"&&"h-10 w-10",t==="lg"&&"h-12 w-12",t==="xl"&&"h-16 w-16",s),...a}));De.displayName=K.displayName;const Is=i.forwardRef(({className:s,...t},a)=>e.jsx(X,{ref:a,className:u("aspect-square h-full w-full object-cover",s),...t}));Is.displayName=X.displayName;const Fe=i.forwardRef(({className:s,...t},a)=>e.jsx(ee,{ref:a,className:u("flex h-full w-full items-center justify-center rounded-full bg-muted text-muted-foreground",s),...t}));Fe.displayName=ee.displayName;const Ts=D("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-all focus:outline-none focus:ring-2 focus:ring-primary focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground border-border",success:"border-transparent bg-green-500/20 text-green-700 dark:text-green-300 border-green-500/30",warning:"border-transparent bg-yellow-500/20 text-yellow-700 dark:text-yellow-300 border-yellow-500/30",info:"border-transparent bg-primary/10 text-primary border-primary/30"},size:{default:"px-2.5 py-0.5 text-xs",sm:"px-2 py-0.5 text-[10px]",lg:"px-3 py-0.5 text-sm"}},defaultVariants:{variant:"default",size:"default"}});function C({className:s,variant:t,size:a,...l}){return e.jsx("div",{className:u(Ts({variant:t,size:a}),s),...l})}const As=({className:s=""})=>{const{requests:t,user:a}=y();if(a?.role!=="admin")return null;const l=t.filter(o=>o.status==="pending").length;return l===0?null:e.jsx(C,{variant:"destructive",className:`${s} animate-pulse`,children:l})},Ds=()=>{const{user:s,logout:t,requests:a}=y(),[l,o]=se.useState(!1);return s?e.jsx("header",{className:"bg-white border-b border-gray-200 shadow-sm",children:e.jsx("div",{className:"max-w-7xl mx-auto px-2 sm:px-4 lg:px-8",children:e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center h-auto sm:h-16 py-2 sm:py-0",children:[e.jsxs("div",{className:"flex items-center space-x-3 mb-2 sm:mb-0",children:[e.jsx("img",{src:"/Logo.png",alt:"Logo",className:"mx-auto",style:{width:"196px"}}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg sm:text-xl font-bold bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:"Office Supplies"}),e.jsx("p",{className:"text-xs sm:text-sm text-gray-500",children:"Inventory Management"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-2 sm:space-y-0 sm:space-x-4",children:[s.role==="admin"&&e.jsxs("div",{className:"relative",children:[e.jsxs(h,{variant:"ghost",size:"sm",className:"relative",onClick:()=>o(m=>!m),children:[e.jsx(Ye,{className:"w-4 h-4"}),e.jsx(As,{className:"absolute -top-1 -right-1 h-5 w-5 text-xs"})]}),l&&e.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white border border-gray-200 rounded shadow-lg z-50",children:[e.jsx("div",{className:"p-4 border-b font-bold text-gray-700",children:"New Requests"}),e.jsx("ul",{className:"max-h-64 overflow-y-auto",children:a.filter(m=>m.status==="pending").length===0?e.jsx("li",{className:"p-4 text-gray-500 text-sm",children:"No new requests."}):a.filter(m=>m.status==="pending").map(m=>e.jsxs("li",{className:"p-4 border-b last:border-b-0 flex flex-col",children:[e.jsx("span",{className:"font-semibold text-blue-600",children:m.itemName}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Requested by: ",m.userName," (",m.department,")"]}),e.jsxs("span",{className:"text-xs text-gray-500",children:["Qty: ",m.quantity," | Date: ",m.requestDate]})]},m.id))})]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(De,{className:"w-8 h-8",children:e.jsx(Fe,{className:"bg-gradient-to-br from-blue-500 to-purple-500 text-white text-sm",children:s.name.split(" ").map(m=>m[0]).join("")})}),e.jsxs("div",{className:"hidden sm:block",children:[e.jsx("p",{className:"text-sm font-medium text-gray-900",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"text-xs text-gray-500",children:s.department}),s.role==="admin"?e.jsx(_e,{className:"w-3 h-3 text-blue-600"}):e.jsx(te,{className:"w-3 h-3 text-gray-600"}),e.jsx(C,{variant:s.role==="admin"?"default":"secondary",className:"text-xs",children:s.role})]})]})]}),e.jsxs(h,{variant:"outline",size:"sm",onClick:t,className:"flex items-center space-x-2",children:[e.jsx(Ge,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:"Sign Out"})]})]})]})})}):null},F=ts,L=as,T=i.forwardRef(({className:s,children:t,...a},l)=>e.jsxs(ae,{ref:l,className:u("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground/60 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-primary focus-visible:border-primary/50 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1 transition-colors",s),...a,children:[t,e.jsx(Ze,{asChild:!0,children:e.jsx(re,{className:"h-4 w-4 opacity-50 transition-transform duration-200 ease-in-out group-data-[state=open]:rotate-180"})})]}));T.displayName=ae.displayName;const Le=i.forwardRef(({className:s,...t},a)=>e.jsx(le,{ref:a,className:u("flex cursor-default items-center justify-center py-1 text-muted-foreground",s),...t,children:e.jsx(Je,{className:"h-4 w-4"})}));Le.displayName=le.displayName;const Pe=i.forwardRef(({className:s,...t},a)=>e.jsx(ne,{ref:a,className:u("flex cursor-default items-center justify-center py-1 text-muted-foreground",s),...t,children:e.jsx(re,{className:"h-4 w-4"})}));Pe.displayName=ne.displayName;const A=i.forwardRef(({className:s,children:t,position:a="popper",...l},o)=>e.jsx(Ke,{children:e.jsxs(ie,{ref:o,className:u("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border border-border/40 bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 duration-200",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",s),position:a,...l,children:[e.jsx(Le,{}),e.jsx(Xe,{className:u("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(Pe,{})]})}));A.displayName=ie.displayName;const Fs=i.forwardRef(({className:s,...t},a)=>e.jsx(oe,{ref:a,className:u("py-1.5 pl-8 pr-2 text-sm font-medium text-muted-foreground",s),...t}));Fs.displayName=oe.displayName;const w=i.forwardRef(({className:s,children:t,...a},l)=>e.jsxs(de,{ref:l,className:u("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent/50 focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 transition-colors",s),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(es,{children:e.jsx(ce,{className:"h-4 w-4 text-primary"})})}),e.jsx(ss,{children:t})]}));w.displayName=de.displayName;const Ls=i.forwardRef(({className:s,...t},a)=>e.jsx(me,{ref:a,className:u("-mx-1 my-1 h-px bg-muted",s),...t}));Ls.displayName=me.displayName;const Ps=({onAdd:s,onClose:t})=>{const a=se.useMemo(()=>window.crypto?.randomUUID?window.crypto.randomUUID():Math.random().toString(36).slice(2),[]),[l,o]=i.useState(""),[m,n]=i.useState(""),[d,c]=i.useState("user"),[r,p]=i.useState(""),[j,I]=i.useState(""),[x,R]=i.useState(null),ze=["Office of the President","CRS","EB","RI","Claims","Finance","IT","Admin","Human Resources"],Ee=v=>{v.preventDefault(),R(null),Promise.resolve(s({id:a,name:l,email:m,role:d,password:r,department:j})).then(()=>t()).catch($e=>R($e.message||"Failed to add user."))};return e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:e.jsxs("form",{onSubmit:Ee,className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-sm space-y-4",children:[e.jsx("h2",{className:"text-xl font-bold mb-2",children:"Add User"}),x&&e.jsx("div",{className:"text-red-600 text-sm mb-2",children:x}),e.jsx("div",{}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"name",children:"Name"}),e.jsx(f,{id:"name",value:l,onChange:v=>o(v.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"email",children:"Email"}),e.jsx(f,{id:"email",type:"email",value:m,onChange:v=>n(v.target.value),required:!0})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"role",children:"Role"}),e.jsxs("select",{id:"role",value:d,onChange:v=>c(v.target.value),className:"w-full border rounded px-2 py-1",children:[e.jsx("option",{value:"user",children:"Standard User"}),e.jsx("option",{value:"admin",children:"Admin"})]})]}),e.jsxs("div",{children:[e.jsx(g,{htmlFor:"password",children:"Password"}),e.jsx(f,{id:"password",type:"password",value:r,onChange:v=>p(v.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"department",children:"Department"}),e.jsxs(F,{value:j,onValueChange:I,children:[e.jsx(T,{children:e.jsx(L,{placeholder:"Select department"})}),e.jsx(A,{children:ze.map(v=>e.jsx(w,{value:v,children:v},v))})]})]}),e.jsxs("div",{className:"flex justify-end space-x-2",children:[e.jsx(h,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(h,{type:"submit",children:"Add User"})]})]})})},B=ns,Vs=rs,Ve=i.forwardRef(({className:s,...t},a)=>e.jsx(ue,{ref:a,className:u("fixed inset-0 z-50 bg-background/80 backdrop-blur-sm data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t}));Ve.displayName=ue.displayName;const U=i.forwardRef(({className:s,children:t,...a},l)=>e.jsxs(Vs,{children:[e.jsx(Ve,{}),e.jsxs(xe,{ref:l,className:u("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border border-border/40 bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...a,children:[t,e.jsxs(ls,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));U.displayName=xe.displayName;const z=({className:s,...t})=>e.jsx("div",{className:u("flex flex-col space-y-1.5 text-center sm:text-left",s),...t});z.displayName="DialogHeader";const E=i.forwardRef(({className:s,...t},a)=>e.jsx(pe,{ref:a,className:u("text-lg font-semibold leading-none tracking-tight text-foreground",s),...t}));E.displayName=pe.displayName;const Us=i.forwardRef(({className:s,...t},a)=>e.jsx(he,{ref:a,className:u("text-sm text-muted-foreground",s),...t}));Us.displayName=he.displayName;const zs=["Writing","Paper","Tools","Electronics","Furniture","Cleaning","Other"],Es=({open:s,onOpenChange:t})=>{const{addItem:a}=y(),[l,o]=i.useState({name:"",category:"",quantity:"",minstock:"",supplier:""}),m=async d=>{d.preventDefault();const c={id:Date.now().toString(),name:l.name,category:l.category,quantity:parseInt(l.quantity),minstock:parseInt(l.minstock),supplier:l.supplier},{error:r}=await fs.from("Inventory").insert([c]);r&&console.error("Supabase insert error:",r.message,r.details),a(c),o({name:"",category:"",quantity:"",minstock:"",supplier:""}),t(!1)},n=(d,c)=>{o(r=>({...r,[d]:c}))};return e.jsx(B,{open:s,onOpenChange:t,children:e.jsxs(U,{className:"sm:max-w-md",children:[e.jsx(z,{children:e.jsx(E,{children:"Add New Item"})}),e.jsxs("form",{onSubmit:m,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"name",children:"Item Name"}),e.jsx(f,{id:"name",value:l.name,onChange:d=>n("name",d.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"category",children:"Category"}),e.jsxs(F,{value:l.category,onValueChange:d=>n("category",d),children:[e.jsx(T,{children:e.jsx(L,{placeholder:"Select category"})}),e.jsx(A,{children:zs.map(d=>e.jsx(w,{value:d,children:d},d))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"quantity",children:"Quantity"}),e.jsx(f,{id:"quantity",type:"number",min:"0",value:l.quantity,onChange:d=>n("quantity",d.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"minstock",children:"Min Stock"}),e.jsx(f,{id:"minstock",type:"number",min:"0",value:l.minstock,onChange:d=>n("minstock",d.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"supplier",children:"Supplier"}),e.jsx(f,{id:"supplier",value:l.supplier,onChange:d=>n("supplier",d.target.value),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:()=>t(!1),children:"Cancel"}),e.jsx(h,{type:"submit",children:"Add Item"})]})]})]})})},$s=["Writing","Paper","Tools","Electronics","Furniture","Cleaning","Other"],Os=({itemId:s,onClose:t})=>{const{inventory:a,updateItem:l}=y(),[o,m]=i.useState({name:"",category:"",quantity:"",minStock:"",supplier:""}),n=s?a.find(r=>r.id===s):null;i.useEffect(()=>{n&&m({name:n.name,category:n.category,quantity:n.quantity.toString(),minStock:n.minstock.toString(),supplier:n.supplier})},[n]);const d=r=>{r.preventDefault(),s&&(l(s,{name:o.name,category:o.category,quantity:parseInt(o.quantity),minstock:parseInt(o.minStock),supplier:o.supplier}),t())},c=(r,p)=>{m(j=>({...j,[r]:p}))};return e.jsx(B,{open:!!s,onOpenChange:()=>t(),children:e.jsxs(U,{className:"sm:max-w-md",children:[e.jsx(z,{children:e.jsx(E,{children:"Edit Item"})}),e.jsxs("form",{onSubmit:d,className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"name",children:"Item Name"}),e.jsx(f,{id:"name",value:o.name,onChange:r=>c("name",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"category",children:"Category"}),e.jsxs(F,{value:o.category,onValueChange:r=>c("category",r),children:[e.jsx(T,{children:e.jsx(L,{})}),e.jsx(A,{children:$s.map(r=>e.jsx(w,{value:r,children:r},r))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"quantity",children:"Quantity"}),e.jsx(f,{id:"quantity",type:"number",min:"0",value:o.quantity,onChange:r=>c("quantity",r.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"minStock",children:"Min Stock"}),e.jsx(f,{id:"minStock",type:"number",min:"0",value:o.minStock,onChange:r=>c("minStock",r.target.value),required:!0})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"supplier",children:"Supplier"}),e.jsx(f,{id:"supplier",value:o.supplier,onChange:r=>c("supplier",r.target.value),required:!0})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(h,{type:"submit",children:"Update Item"})]})]})]})})},Bs=({itemId:s,onClose:t})=>{const{inventory:a,createRequest:l}=y(),[o,m]=i.useState("1"),[n,d]=i.useState(""),c=s?a.find(p=>p.id===s):null,r=p=>{p.preventDefault(),s&&(l(s,parseInt(o),n||void 0),m("1"),d(""),t())};return c?e.jsx(B,{open:!!s,onOpenChange:()=>t(),children:e.jsxs(U,{className:"sm:max-w-md","aria-describedby":"request-item-description",children:[e.jsx(z,{children:e.jsx(E,{children:"Request Item"})}),e.jsxs("form",{onSubmit:r,className:"space-y-4",children:[e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",id:"request-item-description",children:[e.jsx("h4",{className:"font-semibold text-gray-900",children:c.name}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Available: ",c.quantity," units"]}),e.jsxs("p",{className:"text-sm text-gray-600",children:["Category: ",c.category]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"quantity",children:"Quantity Requested"}),e.jsx(f,{id:"quantity",type:"number",min:"1",max:c.quantity,value:o,onChange:p=>m(p.target.value),required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(g,{htmlFor:"notes",children:"Notes (Optional)"}),e.jsx(f,{id:"notes",placeholder:"Add any additional notes for your request...",value:n,onChange:p=>d(p.target.value)})]}),e.jsxs("div",{className:"flex justify-end space-x-2 pt-4",children:[e.jsx(h,{type:"button",variant:"outline",onClick:t,children:"Cancel"}),e.jsx(h,{type:"submit",disabled:c.quantity===0,children:"Submit Request"})]})]})]})}):null},Hs=()=>{const{user:s,inventory:t,deleteItem:a}=y(),[l,o]=i.useState(""),[m,n]=i.useState(!1),[d,c]=i.useState(null),[r,p]=i.useState(null),j=t.filter(x=>x.name.toLowerCase().includes(l.toLowerCase())||x.category.toLowerCase().includes(l.toLowerCase())),I=x=>{confirm("Are you sure you want to delete this item?")&&a(x)};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsxs("div",{className:"relative flex-1 max-w-md",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(f,{placeholder:"Search inventory...",value:l,onChange:x=>o(x.target.value),className:"pl-10"})]}),s?.role==="admin"&&e.jsxs(h,{onClick:()=>n(!0),className:"bg-gradient-to-r from-teal-500 to-blue-600",children:[e.jsx(is,{className:"w-4 h-4 mr-2"}),"Add Item"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:j.map(x=>e.jsxs(b,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-500 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:x.name}),e.jsx(C,{variant:"secondary",className:"text-xs mt-1",children:x.category})]})]}),s?.role==="admin"&&x.quantity<=x.minstock&&e.jsx(fe,{className:"w-5 h-5 text-red-500"})]})}),e.jsxs(N,{className:"space-y-4",children:[s?.role==="admin"&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Stock"}),e.jsx("p",{className:`font-semibold ${x.quantity<=x.minstock?"text-red-600":"text-green-600"}`,children:x.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Min Stock"}),e.jsx("p",{className:"font-semibold",children:x.minstock})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Supplier"}),e.jsx("p",{className:"font-semibold text-xs",children:x.supplier})]})]}),e.jsxs("div",{className:"flex gap-2",children:[s?.role==="user"&&e.jsx(h,{size:"sm",variant:"outline",onClick:()=>p(x.id),className:"flex-1",disabled:x.quantity===0,children:"Request"}),s?.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{size:"sm",variant:"outline",onClick:()=>c(x.id),className:"flex-1",children:[e.jsx(os,{className:"w-3 h-3 mr-1"}),"Edit"]}),e.jsx(h,{size:"sm",variant:"destructive",onClick:()=>I(x.id),children:e.jsx(ds,{className:"w-3 h-3"})})]})]})]})]},x.id))}),j.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No items found"}),e.jsx("p",{className:"text-gray-600",children:l?"Try adjusting your search terms.":"No inventory items available."})]}),e.jsx(Es,{open:m,onOpenChange:n}),e.jsx(Os,{itemId:d,onClose:()=>c(null)}),e.jsx(Bs,{itemId:r,onClose:()=>p(null)})]})},Ms=()=>{const{user:s,requests:t,updateRequest:a}=y(),l=s?.role==="admin"?t.filter(n=>n.archived!==!0):t.filter(n=>n.userId===s?.id),o=n=>{switch(n){case"pending":return"bg-yellow-100 text-yellow-800 border-yellow-200";case"approved":return"bg-blue-100 text-blue-800 border-blue-200";case"denied":return"bg-red-100 text-red-800 border-red-200";case"fulfilled":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},m=(n,d)=>{a(n,d)};return l.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(O,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No requests found"}),e.jsx("p",{className:"text-gray-600",children:s?.role==="admin"?"No supply requests have been submitted yet.":"You haven't made any supply requests yet."}),e.jsx("div",{className:"mt-6",children:e.jsx(H,{to:"/request-history",className:"inline-block",children:e.jsx(h,{variant:"outline",children:"View Request History"})})})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(H,{to:"/request-history",className:"inline-block",children:e.jsx(h,{variant:"outline",children:"View Request History"})})}),e.jsx("div",{className:"grid gap-4",children:l.map(n=>e.jsxs(b,{className:"bg-white shadow-sm hover:shadow-md transition-shadow",children:[e.jsx(S,{className:"pb-3",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-green-500 to-blue-500 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx(k,{className:"text-lg",children:n.itemName}),e.jsxs("div",{className:"flex items-center space-x-4 mt-1 text-sm text-gray-500",children:[s?.role==="admin"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(te,{className:"w-3 h-3"}),e.jsx("span",{children:n.userName})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx("span",{className:"w-2 h-2 bg-blue-500 rounded-full"}),e.jsx("span",{children:n.department})]})]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{children:n.requestDate})]})]})]})]}),e.jsx(C,{className:o(n.status),children:n.status})]})}),e.jsxs(N,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Quantity Requested"}),e.jsx("p",{className:"font-semibold text-lg",children:n.quantity})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-500",children:"Status"}),e.jsx("p",{className:"font-semibold capitalize",children:n.status})]})]}),n.notes&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-sm text-gray-600 font-medium mb-1",children:"Notes:"}),e.jsx("p",{className:"text-sm text-gray-800",children:n.notes})]}),s?.role==="admin"&&n.status==="pending"&&e.jsxs("div",{className:"flex gap-2 pt-2",children:[e.jsxs(h,{size:"sm",onClick:()=>m(n.id,"approved"),className:"flex-1 bg-green-600 hover:bg-green-700",children:[e.jsx(ce,{className:"w-3 h-3 mr-1"}),"Approve"]}),e.jsxs(h,{size:"sm",variant:"destructive",onClick:()=>m(n.id,"denied"),className:"flex-1",children:[e.jsx($,{className:"w-3 h-3 mr-1"}),"Deny"]})]}),s?.role==="admin"&&n.status==="approved"&&e.jsx(h,{size:"sm",onClick:()=>m(n.id,"fulfilled"),className:"w-full bg-blue-600 hover:bg-blue-700",children:"Mark as Fulfilled"})]})]},n.id))})]})},Qs=()=>{const{user:s,requests:t,inventory:a}=y(),[l,o]=i.useState("overview"),m=[...new Set(t.map(r=>r.department))],n={totalRequests:t.length,pendingRequests:t.filter(r=>r.status==="pending").length,fulfilledRequests:t.filter(r=>r.status==="fulfilled").length,lowStockItems:a.filter(r=>r.quantity<=r.minstock).length},d=m.map(r=>({department:r,totalRequests:t.filter(p=>p.department===r).length,pendingRequests:t.filter(p=>p.department===r&&p.status==="pending").length,fulfilledRequests:t.filter(p=>p.department===r&&p.status==="fulfilled").length})),c=()=>{const r=l==="department"?d:t,p=[Object.keys(r[0]||{}).join(","),...r.map(R=>Object.values(R).join(","))].join(`
`),j=new Blob([p],{type:"text/csv"}),I=URL.createObjectURL(j),x=document.createElement("a");x.href=I,x.download=`${l}-report.csv`,x.click()};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Reports & Analytics"}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(F,{value:l,onValueChange:o,children:[e.jsx(T,{className:"w-48",children:e.jsx(L,{})}),e.jsxs(A,{children:[e.jsx(w,{value:"overview",children:"Overview"}),e.jsx(w,{value:"department",children:"By Department"}),e.jsx(w,{value:"requests",children:"All Requests"})]})]}),e.jsxs(h,{onClick:c,className:"flex items-center gap-2",children:[e.jsx(cs,{className:"w-4 h-4"}),"Export CSV"]})]})]}),l==="overview"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs(b,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Total Requests"}),e.jsx(ve,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold",children:n.totalRequests})})]}),e.jsxs(b,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Pending"}),e.jsx(ms,{className:"h-4 w-4 text-yellow-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:n.pendingRequests})})]}),e.jsxs(b,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Fulfilled"}),e.jsx(q,{className:"h-4 w-4 text-green-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-green-600",children:n.fulfilledRequests})})]}),e.jsxs(b,{children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium",children:"Low Stock Items"}),e.jsx(q,{className:"h-4 w-4 text-red-600"})]}),e.jsx(N,{children:e.jsx("div",{className:"text-2xl font-bold text-red-600",children:n.lowStockItems})})]})]}),l==="department"&&e.jsxs(b,{children:[e.jsx(S,{children:e.jsx(k,{children:"Department Statistics"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-4",children:d.map(r=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(us,{className:"w-5 h-5 text-blue-600"}),e.jsx("span",{className:"font-medium",children:r.department})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs(C,{variant:"outline",children:["Total: ",r.totalRequests]}),e.jsxs(C,{variant:"secondary",children:["Pending: ",r.pendingRequests]}),e.jsxs(C,{variant:"default",children:["Fulfilled: ",r.fulfilledRequests]})]})]},r.department))})})]}),l==="requests"&&e.jsxs(b,{children:[e.jsx(S,{children:e.jsx(k,{children:"All Requests"})}),e.jsx(N,{children:e.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:(s?.role==="admin"?t:t.filter(r=>r.userId===s?.id)).map(r=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:r.itemName}),e.jsxs("div",{className:"text-sm text-gray-600",children:[r.userName," - ",r.department," - Qty: ",r.quantity]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{variant:r.status==="fulfilled"?"default":r.status==="approved"?"secondary":r.status==="denied"?"destructive":"outline",children:r.status}),e.jsx("span",{className:"text-sm text-gray-500",children:r.requestDate})]})]},r.id))})})]})]})},Ws=()=>{const{user:s,inventory:t,requests:a}=y(),l=t.length,o=t.filter(c=>c.quantity<=c.minStock).length,m=s?.role==="admin"?a.length:a.filter(c=>c.userId===s?.id).length,n=s?.role==="admin"?a.filter(c=>c.status==="pending").length:a.filter(c=>c.userId===s?.id&&c.status==="pending").length,d=[{title:"Total Items",value:l,icon:q,color:"bg-blue-500",description:"Items in inventory"},{title:"Low Stock Alert",value:o,icon:fe,color:o>0?"bg-red-500":"bg-green-500",description:"Items below minimum"},{title:s?.role==="admin"?"All Requests":"My Requests",value:m,icon:O,color:"bg-purple-500",description:s?.role==="admin"?"Total requests":"Your requests"},{title:"Pending",value:n,icon:xs,color:n>0?"bg-orange-500":"bg-green-500",description:"Awaiting action"}];return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:d.map((c,r)=>e.jsxs(b,{className:"bg-white shadow-sm border-0 hover:shadow-md transition-shadow",children:[e.jsxs(S,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(k,{className:"text-sm font-medium text-gray-600",children:c.title}),e.jsx("div",{className:`w-10 h-10 ${c.color} rounded-lg flex items-center justify-center`,children:e.jsx(c.icon,{className:"w-5 h-5 text-white"})})]}),e.jsxs(N,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"text-3xl font-bold text-gray-900",children:c.value}),c.title==="Low Stock Alert"&&c.value>0&&e.jsx(C,{variant:"destructive",className:"text-xs",children:"Alert"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:c.description})]})]},r))})},Ys=ps,Ue=i.forwardRef(({className:s,...t},a)=>e.jsx(ye,{ref:a,className:u("inline-flex h-10 items-center justify-center rounded-md bg-muted/50 p-1 text-muted-foreground",s),...t}));Ue.displayName=ye.displayName;const P=i.forwardRef(({className:s,...t},a)=>e.jsx(be,{ref:a,className:u("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-primary data-[state=active]:shadow-sm hover:text-foreground",s),...t}));P.displayName=be.displayName;const V=i.forwardRef(({className:s,...t},a)=>e.jsx(Ne,{ref:a,className:u("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary focus-visible:ring-offset-2 animate-in fade-in-0 data-[state=inactive]:animate-out data-[state=inactive]:fade-out-0 duration-200",s),...t}));V.displayName=Ne.displayName;const _s=()=>{const{user:s,addUser:t}=y(),[a,l]=i.useState("inventory"),[o,m]=i.useState(!1);return e.jsxs("div",{className:"min-h-screen bg-gray-50",children:[e.jsx(Ds,{}),e.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("h2",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Welcome back, ",s?.name,"!"]}),e.jsx("p",{className:"text-gray-600",children:s?.role==="admin"?"Manage your office supplies inventory and user requests.":"View available supplies and manage your requests."}),s?.role==="admin"&&e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-teal-500 to-blue-600 text-white rounded shadow hover:from-teal-600 hover:to-blue-700",onClick:()=>m(!0),children:"Add User"}),e.jsx("button",{className:"px-4 py-2 bg-gradient-to-r from-blue-600 to-teal-500 text-white rounded shadow hover:from-blue-700 hover:to-teal-600",onClick:()=>window.location.href="/users",children:"View Users"})]})]}),e.jsx(Ws,{}),e.jsx("div",{className:"mt-8",children:e.jsxs(Ys,{value:a,onValueChange:l,className:"w-full",children:[e.jsxs(Ue,{className:"grid w-full grid-cols-2 lg:w-auto lg:grid-cols-3",children:[e.jsxs(P,{value:"inventory",className:"flex items-center space-x-2",children:[e.jsx(q,{className:"w-4 h-4"}),e.jsx("span",{children:"Inventory"})]}),e.jsxs(P,{value:"requests",className:"flex items-center space-x-2",children:[e.jsx(O,{className:"w-4 h-4"}),e.jsx("span",{children:"Requests"})]}),s?.role==="admin"&&e.jsxs(P,{value:"reports",className:"flex items-center space-x-2",children:[e.jsx(ve,{className:"w-4 h-4"}),e.jsx("span",{children:"Reports"})]})]}),e.jsx(V,{value:"inventory",className:"mt-6",children:e.jsx(Hs,{})}),e.jsx(V,{value:"requests",className:"mt-6",children:e.jsx(Ms,{})}),s?.role==="admin"&&e.jsx(V,{value:"reports",className:"mt-6",children:e.jsx(Qs,{})})]})})]}),o&&e.jsx(Ps,{onAdd:t,onClose:()=>m(!1)})]})},st=()=>{const{user:s}=y();return s?e.jsx(_s,{}):e.jsx(qs,{})},tt=()=>{const{user:s,requests:t}=y(),[a,l]=i.useState("all"),[o,m]=i.useState("");let n=[];s&&s.role==="admin"?n=t:s&&s.role&&(n=t.filter(r=>r.userId===s.id));const d=n.filter(r=>{const p=a==="all"||r.status===a,j=r.itemName.toLowerCase().includes(o.toLowerCase())||r.userName.toLowerCase().includes(o.toLowerCase());return s?.role!=="admin"&&r.status==="pending"?!1:p&&j}),c=r=>{switch(r){case"pending":return"bg-yellow-100 text-yellow-800";case"approved":return"bg-blue-100 text-blue-800";case"denied":return"bg-red-100 text-red-800";case"fulfilled":return"bg-green-100 text-green-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 items-start sm:items-center justify-between",children:[e.jsx("h2",{className:"text-2xl font-bold",children:"Request History"}),e.jsxs("div",{className:"flex gap-4 w-full sm:w-auto",children:[e.jsxs("div",{className:"relative flex-1 sm:w-64",children:[e.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),e.jsx(f,{placeholder:"Search requests...",value:o,onChange:r=>m(r.target.value),className:"pl-10"})]}),e.jsxs(F,{value:a,onValueChange:l,children:[e.jsxs(T,{className:"w-32",children:[e.jsx(hs,{className:"w-4 h-4 mr-2"}),e.jsx(L,{})]}),e.jsxs(A,{children:[e.jsx(w,{value:"all",children:"All"}),e.jsx(w,{value:"pending",children:"Pending"}),e.jsx(w,{value:"approved",children:"Approved"}),e.jsx(w,{value:"denied",children:"Denied"}),e.jsx(w,{value:"fulfilled",children:"Fulfilled"})]})]})]})]}),e.jsx("div",{className:"grid gap-4",children:d.map(r=>e.jsx(b,{className:"hover:shadow-md transition-shadow",children:e.jsxs(N,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-500 to-pink-500 rounded-lg flex items-center justify-center",children:e.jsx(q,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:r.itemName}),e.jsxs("div",{className:"flex items-center space-x-4 text-sm text-gray-500",children:[s?.role==="admin"&&e.jsxs("span",{children:[r.userName," - ",r.department]}),e.jsxs("div",{className:"flex items-center space-x-1",children:[e.jsx(je,{className:"w-3 h-3"}),e.jsx("span",{children:r.requestDate})]}),e.jsxs("span",{children:["Qty: ",r.quantity]})]})]})]}),e.jsx(C,{className:c(r.status),children:r.status.charAt(0).toUpperCase()+r.status.slice(1)})]}),e.jsx("div",{className:"mt-2",children:e.jsxs("span",{className:`text-xs font-semibold px-2 py-1 rounded ${r.status==="approved"?"bg-blue-100 text-blue-700":r.status==="denied"?"bg-red-100 text-red-700":r.status==="fulfilled"?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[r.status==="pending"&&"Pending",r.status==="approved"&&"Approved",r.status==="denied"&&"Denied",r.status==="fulfilled"&&"Fulfilled"]})}),r.notes&&e.jsxs("div",{className:"mt-3 p-2 bg-gray-50 rounded text-sm",children:[e.jsx("strong",{children:"Notes:"})," ",r.notes]})]})},r.id))}),d.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(q,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No requests found"}),e.jsx("p",{className:"text-gray-600",children:o||a!=="all"?"Try adjusting your search or filter criteria.":"No requests have been made yet."})]})]})};export{st as A,h as B,f as I,tt as R,Ks as T,et as a,Js as b,Xs as c};
